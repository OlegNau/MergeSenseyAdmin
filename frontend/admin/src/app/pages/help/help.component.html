<div class="w-full mx-auto px-4 sm:px-6 lg:px-8">
  <header class="pt-8">
    <h1 class="text-3xl font-bold">Help &amp; Support</h1>
    <p class="mt-1 text-sm text-gray-400">Найдите ответы, посмотрите документацию или обратитесь в поддержку</p>
  </header>

  <!-- Search + actions -->
  <div class="mt-6 flex flex-col lg:flex-row lg:items-center gap-3">
    <div class="relative lg:w-[480px]">
      <svg class="pointer-events-none absolute left-3 top-2.5 w-4 h-4 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4.3-4.3"/></svg>
      <input [(ngModel)]="query"
             class="h-10 w-full rounded-md border border-white/10 bg-white/5 pl-9 pr-3 text-sm text-gray-100 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-white/20"
             placeholder="Поиск по FAQ…" />
    </div>

    <div class="lg:ml-auto flex items-center gap-2">
      <a class="h-10 inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/5 px-3 text-sm hover:bg-white/10" href="#" target="_blank" rel="noreferrer">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/></svg>
        Открыть Docs
      </a>
      <a class="h-10 inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/5 px-3 text-sm hover:bg-white/10" href="mailto:support@example.com">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16v16H4z"/><path d="m22 6-10 7L2 6"/></svg>
        Написать в поддержку
      </a>
    </div>
  </div>

  <!-- Quick links -->
  <section class="mt-6">
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
      @for (q of quick; track q.title) {
        <a [href]="q.href" target="_blank" rel="noreferrer"
           class="rounded-xl border border-white/10 bg-white/[0.03] p-4 hover:bg-white/[0.06] transition-colors"
           style="box-shadow:0 0 0 1px rgba(255,255,255,.02) inset">
          <div class="flex items-start gap-3">
            <div class="shrink-0 h-9 w-9 rounded-md bg-white/10 grid place-items-center">
              @switch (q.icon) {
                @case ('book') { <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20V3H6a2 2 0 0 0-2 2z"/></svg> }
                @case ('rocket') { <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4M15 3l6 6-8 8H7l8-14z"/></svg> }
                @case ('api') { <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7h16M4 12h16M4 17h16"/></svg> }
                @case ('changelog') { <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 6h13M8 12h13M8 18h13"/><path d="M3 6h.01M3 12h.01M3 18h.01"/></svg> }
              }
            </div>
            <div>
              <div class="text-sm font-semibold">{{ q.title }}</div>
              <div class="text-xs text-gray-400">{{ q.desc }}</div>
            </div>
          </div>
        </a>
      }
    </div>
  </section>

  <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6 pb-12">
    <!-- FAQ -->
    <article class="rounded-xl border border-white/10 bg-white/[0.03]" style="box-shadow:0 0 0 1px rgba(255,255,255,.02) inset">
      <header class="px-5 pt-5 pb-3">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold">FAQ</h2>
          <div class="flex items-center gap-2">
            <select [(ngModel)]="category"
                    class="h-9 rounded-md border border-white/10 bg-white/5 px-3 text-sm text-gray-100">
              <option value="all">Все категории</option>
              <option value="projects">Projects</option>
              <option value="pipelines">Pipelines</option>
              <option value="billing">Billing</option>
              <option value="account">Account</option>
            </select>
          </div>
        </div>
      </header>
      <ul class="divide-y divide-white/10">
        @for (item of filtered(); track $index) {
          <li class="px-5">
            <button (click)="toggle($index)" class="w-full py-3 flex items-start gap-3 text-left hover:bg-white/[0.04] rounded-md">
              <svg class="mt-1 w-4 h-4 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
              <span class="font-medium">{{ item.q }}</span>
            </button>
            @if (opened().has($index)) {
              <div class="pb-4 pl-7 text-sm text-gray-300">
                {{ item.a }}
              </div>
            }
          </li>
        }
      </ul>
    </article>

    <!-- Contact form -->
    <article class="rounded-xl border border-white/10 bg-white/[0.03] p-5" style="box-shadow:0 0 0 1px rgba(255,255,255,.02) inset">
      <h2 class="text-xl font-semibold">Обращение в поддержку</h2>
      <form class="mt-4 space-y-4" [formGroup]="form" (ngSubmit)="submit()">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm text-gray-300">Тема *</label>
            <input formControlName="subject" class="mt-1 w-full h-10 rounded-md border border-white/10 bg-white/5 px-3 text-sm text-gray-100 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-white/20" placeholder="Коротко о проблеме"/>
            @if (form.get('subject')?.invalid && form.get('subject')?.touched) {
              <div class="mt-1 text-xs text-rose-300">Минимум 5 символов</div>
            }
          </div>
          <div>
            <label class="text-sm text-gray-300">Категория *</label>
            <select formControlName="category" class="mt-1 w-full h-10 rounded-md border border-white/10 bg-white/5 px-3 text-sm text-gray-100">
              <option value="general">Общее</option>
              <option value="projects">Projects</option>
              <option value="pipelines">Pipelines</option>
              <option value="billing">Billing</option>
              <option value="account">Account</option>
            </select>
          </div>
        </div>

        <div>
          <label class="text-sm text-gray-300 block">Приоритет</label>
          <div class="mt-1 flex flex-wrap gap-2">
            <label class="rounded-full px-2 py-1 text-[11px] border cursor-pointer bg-white/5 text-gray-300 border-white/10">
              <input type="radio" class="sr-only" formControlName="severity" value="low"> Низкий
            </label>
            <label class="rounded-full px-2 py-1 text-[11px] border cursor-pointer bg-white/5 text-gray-300 border-white/10">
              <input type="radio" class="sr-only" formControlName="severity" value="normal"> Нормальный
            </label>
            <label class="rounded-full px-2 py-1 text-[11px] border cursor-pointer bg-amber-500/20 text-amber-200 border-amber-400/30">
              <input type="radio" class="sr-only" formControlName="severity" value="high"> Высокий
            </label>
          </div>
        </div>

        <div>
          <label class="text-sm text-gray-300">Сообщение *</label>
          <textarea formControlName="message" class="mt-1 w-full min-h-[120px] rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-gray-100 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-white/20"></textarea>
          @if (form.get('message')?.invalid && form.get('message')?.touched) {
            <div class="mt-1 text-xs text-rose-300">Опишите проблему подробнее</div>
          }
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <label class="inline-flex items-center gap-2 h-10 px-3 rounded-md border border-white/10 bg-white/5 text-sm cursor-pointer">
            <input type="file" class="sr-only" (change)="onFile($event)">
            Прикрепить файл
          </label>
          <label class="inline-flex items-center gap-2 text-sm text-gray-300">
            <input type="checkbox" formControlName="includeDiagnostics" class="h-4 w-4 rounded border-white/10 bg-white/5">
            Включить диагностическую информацию (версия, браузер)
          </label>
        </div>

        <button type="submit" class="inline-flex items-center gap-2 h-10 px-4 rounded-md bg-blue-600/90 hover:bg-blue-600 text-white text-sm font-medium">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7h16v13H4z"/><path d="M8 7V4h8v3"/></svg>
          Отправить
        </button>
      </form>
    </article>
  </section>
</div>

