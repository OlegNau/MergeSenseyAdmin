<!-- Mobile overlay + drawer -->
<div class="md:hidden" [class.hidden]="!sidebarOpen()">
  <div class="fixed inset-0 bg-black/40 z-40" (click)="closeSidebar()"></div>
  <aside
    class="app-sidebar fixed inset-y-0 left-0 w-64 h-screen z-50 border-r backdrop-blur p-4"
    (click)="$event.stopPropagation()"
  >
    <div class="flex flex-col h-full">
      <div class="flex items-center justify-between mb-4">
        <a [routerLink]="['/dashboard']" class="flex items-center gap-3">
          <img ngSrc="assets/logo.png" alt="Logo" class="h-8 w-auto object-contain" height="450" width="2198" priority />
          <span class="font-semibold">App</span>
        </a>
        <button class="p-2 rounded-md hover:bg-gray-100" (click)="closeSidebar()">
          <svg
            class="w-4 h-4"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M18 6L6 18M6 6l12 12" />
          </svg>
        </button>
      </div>

      <nav class="flex-1 space-y-2">
        @for (i of nav; track i.id) {
          <a
            [routerLink]="[i.to]"
            routerLinkActive="is-active"
            class="nav-btn flex items-center gap-3 rounded-md px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900"
            (click)="closeSidebar()"
          >
            @switch (i.icon) {
              @case ('home') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M3 10l9-7 9 7v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                </svg>
              }
              @case ('folder') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M3 7V5a2 2 0 0 1 2-2h5l2 2h9v14H3Z" />
                </svg>
              }
              @case ('activity') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
                </svg>
              }
              @case ('runs') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10" />
                  <path d="M13 12H7" />
                </svg>
              }
              @case ('stats') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <line x1="3" y1="22" x2="21" y2="22" />
                  <rect x="7" y="10" width="2" height="6" />
                  <rect x="11" y="6" width="2" height="10" />
                  <rect x="15" y="13" width="2" height="3" />
                </svg>
              }
              @case ('settings') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M19.4 12.9l1.4-2.4-1.8-3.1-2.8.4-1.6-2.3h-3.6L8.4 7.8l-2.8-.4-1.8 3.1 1.4 2.4-1.4 2.4 1.8 3.1 2.8-.4 1.6 2.3h3.6l1.6-2.3 2.8.4 1.8-3.1-1.4-2.4z" />
                </svg>
              }
              @case ('help') {
                <svg
                  class="w-4 h-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10" />
                  <path d="M9 9a3 3 0 1 1 3 3v2" />
                  <line x1="12" y1="17" x2="12" y2="17" />
                </svg>
              }
            }
            <span>{{ i.label }}</span>
          </a>
        }

        <div class="pt-4 mt-4 border-t space-y-2">
          @for (i of secondary; track i.id) {
            <a
              [routerLink]="[i.to]"
              routerLinkActive="is-active"
              class="nav-btn flex items-center gap-3 rounded-md px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900"
              (click)="closeSidebar()"
            >
              @switch (i.icon) {
                @case ('settings') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M19.4 12.9l1.4-2.4-1.8-3.1-2.8.4-1.6-2.3h-3.6L8.4 7.8l-2.8-.4-1.8 3.1 1.4 2.4-1.4 2.4 1.8 3.1 2.8-.4 1.6 2.3h3.6l1.6-2.3 2.8.4 1.8-3.1-1.4-2.4z" />
                  </svg>
                }
                @case ('help') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="12" cy="12" r="10" />
                    <path d="M9 9a3 3 0 1 1 3 3v2" />
                    <line x1="12" y1="17" x2="12" y2="17" />
                  </svg>
                }
              }
              <span>{{ i.label }}</span>
            </a>
          }
        </div>
      </nav>
    </div>
  </aside>
</div>

<div class="min-h-screen bg-gray-50 text-gray-900">
  <div class="flex">
    <!-- Desktop sidebar -->
    <aside class="app-sidebar hidden md:block md:sticky md:top-0 md:h-screen w-64 border-r backdrop-blur">
      <div class="flex flex-col h-full px-4 py-6">
        <a [routerLink]="['/dashboard']" class="flex items-center gap-3">
          <img src="assets/logo.png" alt="Logo" class="h-8 w-auto object-contain" />
          <span class="font-semibold">App</span>
        </a>

        <nav class="flex-1 mt-6 space-y-2">
          @for (i of nav; track i.id) {
            <a
              [routerLink]="[i.to]"
              routerLinkActive="is-active"
              class="nav-btn flex items-center gap-3 rounded-md px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900"
            >
              @switch (i.icon) {
                @case ('home') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M3 10l9-7 9 7v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                  </svg>
                }
                @case ('folder') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M3 7V5a2 2 0 0 1 2-2h5l2 2h9v14H3Z" />
                  </svg>
                }
                @case ('activity') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
                  </svg>
                }
                @case ('runs') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="12" cy="12" r="10" />
                    <path d="M13 12H7" />
                  </svg>
                }
                @case ('stats') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="3" y1="22" x2="21" y2="22" />
                    <rect x="7" y="10" width="2" height="6" />
                    <rect x="11" y="6" width="2" height="10" />
                    <rect x="15" y="13" width="2" height="3" />
                  </svg>
                }
                @case ('settings') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M19.4 12.9l1.4-2.4-1.8-3.1-2.8.4-1.6-2.3h-3.6L8.4 7.8l-2.8-.4-1.8 3.1 1.4 2.4-1.4 2.4 1.8 3.1 2.8-.4 1.6 2.3h3.6l1.6-2.3 2.8.4 1.8-3.1-1.4-2.4z" />
                  </svg>
                }
                @case ('help') {
                  <svg
                    class="w-4 h-4"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="12" cy="12" r="10" />
                    <path d="M9 9a3 3 0 1 1 3 3v2" />
                    <line x1="12" y1="17" x2="12" y2="17" />
                  </svg>
                }
              }
              <span>{{ i.label }}</span>
            </a>
          }

          <div class="pt-4 mt-4 border-t space-y-2">
            @for (i of secondary; track i.id) {
              <a
                [routerLink]="[i.to]"
                routerLinkActive="is-active"
                class="nav-btn flex items-center gap-3 rounded-md px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900"
              >
                @switch (i.icon) {
                  @case ('settings') {
                    <svg
                      class="w-4 h-4"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M19.4 12.9l1.4-2.4-1.8-3.1-2.8.4-1.6-2.3h-3.6L8.4 7.8l-2.8-.4-1.8 3.1 1.4 2.4-1.4 2.4 1.8 3.1 2.8-.4 1.6 2.3h3.6l1.6-2.3 2.8.4 1.8-3.1-1.4-2.4z" />
                    </svg>
                  }
                  @case ('help') {
                    <svg
                      class="w-4 h-4"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <circle cx="12" cy="12" r="10" />
                      <path d="M9 9a3 3 0 1 1 3 3v2" />
                      <line x1="12" y1="17" x2="12" y2="17" />
                    </svg>
                  }
                }
                <span>{{ i.label }}</span>
              </a>
            }
          </div>
        </nav>
      </div>
    </aside>

    <!-- Main -->
    <div class="flex-1 min-w-0">
      <!-- Header -->
      <header class="app-header border-b backdrop-blur">
        <div class="flex h-16 items-center px-6">
          <button class="md:hidden p-2 rounded-md hover:bg-gray-100" (click)="toggleSidebar()">
            <svg
              class="w-4 h-4"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M3 6h18M3 12h18M3 18h18" />
            </svg>
          </button>

          <div class="ml-auto flex items-center gap-1">
            <!-- Search -->
            <button class="p-2 rounded-md hover:bg-gray-100">
              <svg
                class="w-4 h-4"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
              </svg>
            </button>
            <!-- Bell -->
            <button class="p-2 rounded-md hover:bg-gray-100">
              <svg
                class="w-4 h-4"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9" />
                <path d="M13.73 21a2 2 0 0 1-3.46 0" />
              </svg>
            </button>
            <!-- Settings -->
            <button class="p-2 rounded-md hover:bg-gray-100">
              <svg
                class="w-4 h-4"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M19.4 12.9l1.4-2.4-1.8-3.1-2.8.4-1.6-2.3h-3.6L8.4 7.8l-2.8-.4-1.8 3.1 1.4 2.4-1.4 2.4 1.8 3.1 2.8-.4 1.6 2.3h3.6l1.6-2.3 2.8.4 1.8-3.1-1.4-2.4z" />
              </svg>
            </button>
            <!-- User -->
            <div class="w-8 h-8 rounded-full bg-gray-200"></div>
          </div>
        </div>
      </header>

      <main class="p-4 sm:p-6">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>
</div>

